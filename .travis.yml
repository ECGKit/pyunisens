language: python

python:
- '3.6'
- '3.7'
- '3.8'
- 3.8-dev

install:
- pip install -r requirements.txt
- pip install pytest pytest-cov codecov
- pip install -e . -v

script:
- pytest ./test/unisens_test.py
- coverage run ./test/unisens_test.py

after_success:
- codecov

deploy:
  provider: pypi
  username: "skjerns"
  password:
    secure: oLsHbWnUoGQ+XuTdd3lx1Kz+JxUOPaVb0+0uQ+LAq+X1cCtvsWGuhHHGyyOWJC7Zjgpq0jZWulDO57jJKMbZ0+qAVCYOgiiRo8ZsBVZVUQaDsWXCsdffn/UQm8kni8EXHvMqLeCzWrDyhtqqbnxm6fSeAYiTXH23UFezod4zesf6Jwl9EUh2Yz2pk1jESMYPWIpLsFhgXQjxPJUc/u0Ivjs33Ba/2b0XIlXy/Ay9gUp6rrM+QjXP67Gq4kIiNLhW8WZJ/7hW1Mx4hzO+q1ZDG6abFzu7PvWjqndrMiFSoUG4ZEyn+EGQ+GyCUfKoFEpcbB8S/+jRyVUbOBoqfNYFBNzM5dtNB+6cpimpRxVddyko2+CThjMll8OGEvObcRtwE01ywZrNUQ8Adce5BXelap3PXRHB5+FtxTqgNZ4TQrfrJFri5rFQ19Sy4zLlR9AFZYzVGqX5q4Vm+oXCVeSgyyAI2GlWeLyHC/zpb0COtEVOHPnwcBKD7s/vIv/VhQY2bxh1M6Eu0ASuwJlzqmgigVf37bWynLBDF0Db1+1C2HFZI5c5JUhfp9McD+b9+w2p1PNWAsODPLRH06rVabmeMRBIuJyxkfVlG2ni4jZVHCNvipv6aMe9syWJmTkL6ybuCtODw1p+QuKZz6rec/7nN7nCGE17sjFsFPPtoncgDwc=
  edge: true
  on:
    tags: true
